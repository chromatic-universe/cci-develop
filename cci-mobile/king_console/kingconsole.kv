
#:import lv kivy.uix.listview
#:import la kivy.adapters.listadapter


<CciScreen>:
    id: cci_screen
    accordion_id: cci_accordion
    name: 'screen_cci'
    ConsoleAccordion:

        _orientation: 'vertical'
        _inner_orientation: 'horizontal'
        # My size "Listner" -call every root width or height change-
        orientation_handler: self.check_orientation(root.width, root.height)

        id: cci_accordion
        on_touch_up: app._selected_accordion_item()
        AccordionItem:
            title: 'application'
        AccordionItem:
            title: 'tcp'
            Accordion:
                orientation: root.accordion_id._inner_orientation
                AccordionItem:
                    title: 'syn ack'
                    BoxLayout:
                        orientation: 'vertical'
                        GridLayout
                            orientation: 'horizontal'
                            cols: 2
                            size_hint_y: 0.25
                            Button:
                                id: more_tcp_btn
                                text: '...'
                                font_size: 24
                                color: 1,0,0,1
                                background_color: [0,0,0,0]
                                on_press: app._open_extended_window()
                            Button:
                                id: syn_ack_btn
                                text: 'execute syn ack'
                                color: 1,0,0,1
                                background_color: [0,0,0,0]
                                on_press: app.on_ping_ip_input()
                        BoxLayout
                            orientation: 'horizontal'
                            size_hint_y: .25
                            Label:
                                text: 'show trace:'
                            Switch:
                                active: True
                        BoxLayout
                            orientation: 'horizontal'
                            size_hint_y: 0.15
                            Label:
                                text: 'ttl:'
                            Slider:
                                orientation: 'horizontal'
                                min: 1
                                max: 15
                                value: 5
                        GridLayout
                            orientation: 'horizontal'
                            cols: 1
                            size_hint_y: .35
                            Label:
                                text: 'ip syn ack'
                            TextInput:
                                text: '192.168.0.135'
                                id: ip_input_syn
                                cursor_blink: True
                                readonly: False
                                multiline: False
                AccordionItem:
                    title: 'mini port scan'
                    BoxLayout:
                        orientation: 'vertical'
                        GridLayout
                            orientation: 'horizontal'
                            cols: 2
                            size_hint_y: 0.25
                            Button:
                                id: more_tcp_btn
                                text: '...'
                                font_size: 24
                                color: 1,0,0,1
                                background_color: [0,0,0,0]
                                on_press: app._open_extended_window()
                            Button:
                                id: syn_ack_btn
                                text: 'execute mini scan'
                                color: 1,0,0,1
                                background_color: [0,0,0,0]
                                on_press: app.on_ping_ip_input()
                        BoxLayout
                            orientation: 'horizontal'
                            size_hint_y: 0.25
                            Label:
                                text: 'show trace:'
                            Switch:
                                active: True
                        GridLayout
                            orientation: 'horizontal'
                            cols: 1
                            size_hint_y: .50
                            Label:
                                text: 'ip scan'
                            TextInput:
                                text: '192.168.0.135'
                                id: ip_input_syn
                                cursor_blink: True
                                readonly: False
                                multiline: False
                            Label:
                                text: 'ports'
                            TextInput:
                                text: '443 993'
                                id: port_input_syn
                                cursor_blink: True
                                readonly: False
                                multiline: True

        AccordionItem:
            title: 'network'
            Accordion:
                orientation: root.accordion_id._inner_orientation
                AccordionItem:
                    title: 'ping'
                    BoxLayout:
                        orientation: 'vertical'
                        GridLayout
                            orientation: 'horizontal'
                            cols: 2
                            size_hint_y: 0.20
                            Button:
                                id: more_ping_btn
                                text: '...'
                                font_size: 24
                                color: 1,0,0,1
                                background_color: [0,0,0,0]
                                on_press: app._open_extended_window()
                            Button:
                                id: ping_btn
                                text: 'execute ping'
                                color: 1,0,0,1
                                background_color: [0,0,0,0]
                                on_press: root._on_ping_start()
                        BoxLayout
                            orientation: 'horizontal'
                            size_hint_y: 0.15
                            Label:
                                text: 'show trace:'
                            Switch:
                                active: True
                        BoxLayout
                            orientation: 'horizontal'
                            size_hint_y: 0.15
                            Label:
                                text: 'greedy trace:'
                            Switch:
                                active: False
                        BoxLayout
                            orientation: 'horizontal'
                            size_hint_y: 0.15
                            Label:
                                text: 'multiple ip:'
                            Switch:
                                active: False
                        BoxLayout
                            orientation: 'horizontal'
                            size_hint_y: 0.15
                            Label:
                                text: 'timesout: ' + '{0:}'.format( single_slider.value )
                            Slider:
                                orientation: 'horizontal'
                                id: single_slider
                                step: 1
                                min: 1
                                max: 15
                                value: 1
                        GridLayout
                            orientation: 'horizontal'
                            cols: 1
                            size_hint_y: .30
                            Label:
                                text: 'ip or address:'
                            TextInput:
                                text: '192.168.0.133'
                                id: ip_input
                                cursor_blink: True
                                readonly: False
                                multiline: True
                AccordionItem:
                    title: 'ping subnet'
                    BoxLayout:
                        orientation: 'vertical'
                        GridLayout
                            orientation: 'horizontal'
                            cols: 2
                            size_hint_y: 0.20
                            Button:
                                id: more_ping_sub_btn
                                text: '...'
                                font_size: 24
                                color: 1,0,0,1
                                background_color: [0,0,0,0]
                                on_press: app._open_extended_window()
                            Button:
                                id: ping_sub_btn
                                text: 'execute sub ping'
                                color: 1,0,0,1
                                background_color: [0,0,0,0]
                                on_press: app.on_ping_ip_input()
                        BoxLayout
                            orientation: 'horizontal'
                            size_hint_y: 0.15
                            Label:
                                text: 'show trace:'
                            Switch:
                                active: True
                        BoxLayout
                            orientation: 'horizontal'
                            size_hint_y: 0.15
                            Label:
                                text: 'mark reply only:'
                            Switch:
                                active: False
                        BoxLayout
                            orientation: 'horizontal'
                            size_hint_y: 0.15
                            Label:
                                text: 'timeout: ' + '{0:}'.format( subnet_slider.value )
                            Slider:
                                orientation: 'horizontal'
                                id: subnet_slider
                                step: 1
                                min: 1
                                max: 15
                                value: 1
                        GridLayout
                            orientation: 'horizontal'
                            cols: 1
                            size_hint_y: .30
                            Label:
                                text: 'subnet:'
                            TextInput:
                                text: '192.168.0.135'
                                id: ip_subnet_input
                                cursor_blink: True
                                readonly: False
                                multiline: False

        AccordionItem:
            title: 'datalink'
            id: acc_item_datalink
            Accordion:
                orientation: root.accordion_id._inner_orientation
                AccordionItem:
                    title: 'arp'
                AccordionItem:
                    title: 'arp scan'
        AccordionItem:
            title: 'stream'
            Accordion:
                orientation: root.accordion_id._inner_orientation
                AccordionItem:
                    title: 'local'
                AccordionItem:
                    title: 'publish~subscribe'
        AccordionItem:
            title: 'king console'
            GridLayout
                orientation: 'horizontal'
                cols: 1
                ActionBar:
                    pos_hint: {'top':1}
                    ActionView:
                        use_separator: True
                        ActionPrevious:
                            id: cci_action_prev
                            title: 'king console'
                            with_previous: False
                            on_press: app._on_full_screen()
                            app_icon: 'king-console32.png'
                        ActionButton:
                            icon: 'history.png'
                            on_press: app._on_view_manager()
                        ActionButton:
                            icon: 'menu-icon.png'
                            on_press: app._on_view_manager()
                BoxLayout:
                    orientation: 'vertical'
                    Carousel:
                        id: maelstrom_carousel_id
                        direction: 'right'
                        GridLayout:
                            orientation: 'horizontal'
                            id: console_grid
                            cols: 1
                            pos_hint: {'top':1}
                            BoxLayout:
                                size_hint_y: .3
                                Label:
                                    text: 'local ip:'
                                    color: [1,0,0,1]
                                    font_size: 14
                                Label:
                                    id: console_local_id
                                    text: '0.0.0.0'
                                    font_size: 14
                                Label:
                                    text: 'external ip:'
                                    color: [1,0,0,1]
                                    font_size: 14
                                Label:
                                    text: '0.0.0.0'
                                    id: console_real_id
                                    font_size: 14
                            Label:
                                text: 'interfaces'
                                color: [1,0,0,1]
                                font_size: 14
                                size_hint_y: .1
                            ScrollView:
                                id: console_scrlv
                                TextInput:
                                    text: 'foo'
                                    id: console_interfaces
                                    size_hint: 1, None
                                    cursor_blink: True
                                    background_color: [0,0,0,0]
                                    foreground_color: [1,1,1,1]
                                    multiline: True
                                    font_size: 14
                                    readonly: True
                                    height: max( (len(self._lines)+1) * self.line_height, console_scrlv.height)




<ListItemButton>:
    #selected_color: 0, 0, 1, 1
    deselected_color: 0, 0, 0, 0

ScreenManagement:
    CciScreen:
    NetworkScreen:
    TcpScreen:


<CciScreen>:
    id: cci_screen
    name: 'screen_cci'
    ConsoleAccordion:



<NetworkScreen>
    id: network_screen
    name: 'screen_network'
    BoxLayout:
        orientation: 'vertical'
        Image:
            source: 'Male-Face-O4-icon.png'
            on_touch_down: app._manip_extended_window()
        Label:
            text: 'extended network screen'

# tcp screen
<TcpScreen>
    id: tcp_screen
    name: 'screen_tcp'
    GridLayout
        orientation: 'horizontal'
        cols: 1
        Accordion:
            id: tcp_accordion
            orientation: 'vertical'
            AccordionItem:
                title: 'discovery and port manip'
                Accordion:
                    orientation: 'horizontal'
                    AccordionItem:
                        title: 'classics'
                        orientation: 'vertical'
                        GridLayout:
                            orientation: 'horizontal'
                            cols: 1
                            ScrollView:
                                ListView:
                                    id: list_view_id
                                    size_hint_y: .75
                                    adapter:
                                        la.ListAdapter(
                                        data=["cci #{0}".format(i) for i in xrange(30)],
                                        selection_mode='single',
                                        allow_empty_selection=False,
                                        cls=lv.ListItemButton)
                            TextInput:
                                text: 'christmas scan....'
                                id: classics_description
                                size_hint_y: .25
                                cursor_blink: False
                                background_color: [0,0,0,0]
                                foreground_color: [1,1,1,1]
                                multiline: True
                                font_size: 12
                                readonly: True


                    AccordionItem:
                        title: 'custom'
                        orientation: 'vertical'
            AccordionItem:
                title: 'probes and passive scans'
                orientation: 'vertical'
            AccordionItem:
                title: 'king console'
                GridLayout
                    orientation: 'horizontal'
                    cols: 1
                    ActionBar:
                        pos_hint: {'top':1}
                        ActionView:
                            use_separator: True
                            ActionPrevious:
                                id: cci_action_prev
                                title: 'king console'
                                with_previous: False
                                on_press: app._on_full_screen()
                                app_icon: 'king-console32.png'
                            ActionButton:
                                icon: 'history.png'
                                on_press: app._on_view_manager()
                            ActionButton:
                                icon: 'menu-icon.png'
                                on_press: app._on_view_manager()
                    BoxLayout:
                        orientation: 'vertical'



