#:import lv kivy.uix.listview
#:import la kivy.adapters.listadapter
#:import ScrollEffect kivy.effects.scroll.ScrollEffect



ScreenManager:
    Screen:
        name: 'login'
        GridLayout:
            orientation: 'vertical'
            cols: 1
            GridLayout:
                orientation:  'vertical'
                cols: 1
                Image:
                    source: 'king-console128.png'
                    size_hint_y: .25
                Label:
                    text: 'cci-bimini client'
                    halign: 'center'
                    valign: 'middle'
                    size_hint_y: .2
                GridLayout:
                    orientation: 'horizontal'
                    cols: 2
                    size_hint_y: .75
                    Slider:
                        orientation: 'vertical'
                        id: window_width_slider
                        step: 1
                        min: 300
                        max: 1600
                        value: 480
                        size_hint_y: 1.5
                    Slider:
                        orientation: 'vertical'
                        id: window_height_slider
                        step: 1
                        min: 400
                        max: 1600
                        value: 850
                        size_hint_y: 1.5
                    Label:
                        text: 'width ' + '{0:}'.format( window_width_slider.value )
                    Label:
                        text: 'height ' + '{0:}'.format( window_height_slider.value )
            GridLayout:
                orientation: 'horizontal'
                cols: 2
                size_hint_y:  .15
                Label:
                    text: 'enter ip or address:'
                    halign: 'center'
                    valign: 'middle'
                TextInput:
                    id: server
                    text: '192.168.0.156'
                    halign: 'center'
                    size_hint_y: .1
            Button:
                text: 'Connect'
                background_color: [0,0,0,0]
                on_press: app.on_connect()
                size_hint_y: .35

    Screen:
        name: 'desktop'
        Accordion:
            orientation: 'vertical'
            id: cci_bimini_accordion
            AccordionItem
                title: 'remote console'
                ScrollView:
                    effect_cls: ScrollEffect

                    Image:
                        id: desktop
                        nocache: True
                        on_touch_down: app.send_click(args[1])
                        size: self.texture_size
                        size_hint: (None, None)
            AccordionItem:
                title: 'cci-bimini'
                GridLayout
                    orientation: 'horizontal'
                    cols: 1
                    ActionBar:
                        pos_hint: {'top':1}
                        ActionView:
                            use_separator: True
                            ActionPrevious:
                                id: cci_action_prev
                                title: 'king console'
                                with_previous: False
                                on_press: app._on_full_screen()
                                app_icon: 'king-console32.png'
                            ActionButton:
                                icon: 'history.png'
                                on_press: app._on_view_manager()
                            ActionButton:
                                icon: 'menu-icon.png'
                                on_press: app._on_view_manager()
                    BoxLayout:
                        orientation: 'vertical'
                        Carousel:
                            id: maelstrom_carousel_id
                            direction: 'right'
                            GridLayout:
                                orientation: 'horizontal'
                                id: console_grid
                                cols: 1
                                pos_hint: {'top':1}
                                BoxLayout:
                                    size_hint_y: .3
                                    Label:
                                        text: 'local ip:'
                                        color: [1,0,0,1]
                                        font_size: 14
                                    Label:
                                        id: console_local_id
                                        text: '0.0.0.0'
                                        font_size: 14
                                    Label:
                                        text: 'external ip:'
                                        color: [1,0,0,1]
                                        font_size: 14
                                    Label:
                                        text: '0.0.0.0'
                                        id: console_real_id
                                        font_size: 14
                                Label:
                                    text: 'interfaces'
                                    color: [1,0,0,1]
                                    font_size: 14
                                    size_hint_y: .1
                                ScrollView:
                                    id: console_scrlv
                                    TextInput:
                                        text: 'foo'
                                        id: console_interfaces
                                        size_hint: 1, None
                                        cursor_blink: True
                                        background_color: [0,0,0,0]
                                        foreground_color: [1,1,1,1]
                                        multiline: True
                                        font_size: 14
                                        readonly: True
                                        height: max( (len(self._lines)+1) * self.line_height, console_scrlv.height)
